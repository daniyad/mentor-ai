{"ast":null,"code":"import axios from\"axios\";import{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{API_URL}from\"../App\";import Loading from\"../components/Loading\";import Navbar from\"../components/Navbar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const LoginPage=_ref=>{let{Data}=_ref;const[usernameOrEmail,setUsernameOrEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[message,setMessage]=useState(\"\");const[isLoading,setisLoading]=useState(false);const navigate=useNavigate();const handleLogin=()=>{setisLoading(true);try{axios.post(\"\".concat(API_URL,\"/api/accounts/login\"),{username_or_email:usernameOrEmail,password:password}).then(_ref2=>{let{data}=_ref2;if(data.success===false){setMessage(data.message);return;}Data.setTokenFunction(data.token);Data.setIdFunction(data.id);navigate(\"/problemset\");}).catch(e=>{var _e$response;setisLoading(false);setMessage(((_e$response=e.response)===null||_e$response===void 0?void 0:_e$response.data).message);});}catch(error){console.error(\"Sign-up failed:\",error);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"min-h-fit w-[300px] mx-auto text-[14px]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-black shadow-md rounded px-8 pt-6 pb-8 mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-[34px] font-bold mb-[30px] text-center mt-[60px]\",children:\"Log In\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(\"input\",{className:\"appearance-none border w-full py-2 px-3 placeholder:text-text_2 focus:placeholder:text-orange-500 bg-black rounded border-borders leading-tight focus:outline-none focus:border-orange-500\",type:\"text\",placeholder:\"Username or Email\",value:usernameOrEmail,onChange:e=>setUsernameOrEmail(e.target.value),required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsx(\"input\",{className:\"appearance-none border w-full py-2 px-3 placeholder:text-text_2 focus:placeholder:text-orange-500 bg-black rounded border-borders leading-tight focus:outline-none focus:border-orange-500\",type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-orange-500 hover:bg-red-600 text-black font-bold py-[6px] px-4 rounded focus:outline-none focus:shadow-outline w-full transition\",type:\"button\",onClick:handleLogin,children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"w-full block h-[21px]\",children:/*#__PURE__*/_jsx(\"div\",{className:\"absolute left-1/2 -translate-x-1/2\",children:/*#__PURE__*/_jsx(Loading,{})})}):\"Login\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-[20px]\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-text_2\",children:[\"Don't have an account?\",\" \"]}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"text-orange-500 hover:text-red-600\",children:\"Signup\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-[20px] text-red-600 w-full overflow-hidden\",children:message})]})})]});};export default LoginPage;","map":{"version":3,"names":["axios","useState","Link","useNavigate","API_URL","Loading","Navbar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginPage","_ref","Data","usernameOrEmail","setUsernameOrEmail","password","setPassword","message","setMessage","isLoading","setisLoading","navigate","handleLogin","post","concat","username_or_email","then","_ref2","data","success","setTokenFunction","token","setIdFunction","id","catch","e","_e$response","response","error","console","children","className","type","placeholder","value","onChange","target","required","onClick","to"],"sources":["/Users/EL-CAPITAN-2016/Development/mentor/client/src/pages/LoginPage.tsx"],"sourcesContent":["import axios, { AxiosError } from \"axios\";\r\nimport { useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { API_URL } from \"../App\";\r\nimport Loading from \"../components/Loading\";\r\nimport Navbar from \"../components/Navbar\";\r\n\r\nconst LoginPage = ({\r\n    Data,\r\n}: {\r\n    Data: {\r\n        token: string;\r\n        setTokenFunction: (string: string) => void;\r\n        id: string;\r\n        setIdFunction: (string: string) => void;\r\n    };\r\n}) => {\r\n    const [usernameOrEmail, setUsernameOrEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [message, setMessage] = useState(\"\");\r\n    const [isLoading, setisLoading] = useState<boolean>(false);\r\n    const navigate = useNavigate();\r\n\r\n    const handleLogin = () => {\r\n        setisLoading(true);\r\n        try {\r\n            axios\r\n                .post(`${API_URL}/api/accounts/login`, {\r\n                    username_or_email: usernameOrEmail,\r\n                    password: password,\r\n                })\r\n                .then(({ data }) => {\r\n                    if (data.success === false) {\r\n                        setMessage(data.message);\r\n                        return;\r\n                    }\r\n                    Data.setTokenFunction(data.token);\r\n                    Data.setIdFunction(data.id);\r\n                    navigate(\"/problemset\");\r\n                })\r\n                .catch((e: AxiosError) => {\r\n                    setisLoading(false);\r\n                    setMessage(\r\n                        (\r\n                            e.response?.data as {\r\n                                success: boolean;\r\n                                message: string;\r\n                            }\r\n                        ).message\r\n                    );\r\n                });\r\n        } catch (error) {\r\n            console.error(\"Sign-up failed:\", error);\r\n        }\r\n    };\r\n    return (\r\n        <>\r\n            <Navbar/>\r\n            <div className=\"min-h-fit w-[300px] mx-auto text-[14px]\">\r\n                <div className=\"relative bg-black shadow-md rounded px-8 pt-6 pb-8 mb-4\">\r\n                    <h2 className=\"text-[34px] font-bold mb-[30px] text-center mt-[60px]\">\r\n                        Log In\r\n                    </h2>\r\n                    <div className=\"mb-4\">\r\n                        <input\r\n                            className=\"appearance-none border w-full py-2 px-3 placeholder:text-text_2 focus:placeholder:text-orange-500 bg-black rounded border-borders leading-tight focus:outline-none focus:border-orange-500\"\r\n                            type=\"text\"\r\n                            placeholder=\"Username or Email\"\r\n                            value={usernameOrEmail}\r\n                            onChange={(e) => setUsernameOrEmail(e.target.value)}\r\n                            required={true}\r\n                        />\r\n                    </div>\r\n                    <div className=\"mb-6\">\r\n                        <input\r\n                            className=\"appearance-none border w-full py-2 px-3 placeholder:text-text_2 focus:placeholder:text-orange-500 bg-black rounded border-borders leading-tight focus:outline-none focus:border-orange-500\"\r\n                            type=\"password\"\r\n                            placeholder=\"Password\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            required={true}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <button\r\n                            className=\"bg-orange-500 hover:bg-red-600 text-black font-bold py-[6px] px-4 rounded focus:outline-none focus:shadow-outline w-full transition\"\r\n                            type=\"button\"\r\n                            onClick={handleLogin}\r\n                        >\r\n                            {isLoading ? (\r\n                                <div className=\"w-full block h-[21px]\">\r\n                                    <div className=\"absolute left-1/2 -translate-x-1/2\">\r\n                                        <Loading />\r\n                                    </div>\r\n                                </div>\r\n                            ) : (\r\n                                \"Login\"\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n                    <div className=\"flex items-center justify-between mt-[20px]\">\r\n                        <span className=\"text-text_2\">\r\n                            Don't have an account?{\" \"}\r\n                        </span>\r\n                        <Link\r\n                            to=\"/signup\"\r\n                            className=\"text-orange-500 hover:text-red-600\"\r\n                        >\r\n                            Signup\r\n                        </Link>\r\n                    </div>\r\n                    <div className=\"text-center mt-[20px] text-red-600 w-full overflow-hidden\">\r\n                        {message}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAsB,OAAO,CACzC,OAASC,QAAQ,KAAQ,OAAO,CAChC,OAASC,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,OAAO,KAAQ,QAAQ,CAChC,MAAO,CAAAC,OAAO,KAAM,uBAAuB,CAC3C,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAE1C,KAAM,CAAAC,SAAS,CAAGC,IAAA,EASZ,IATa,CACfC,IAQJ,CAAC,CAAAD,IAAA,CACG,KAAM,CAACE,eAAe,CAAEC,kBAAkB,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CAC1D,KAAM,CAACiB,QAAQ,CAAEC,WAAW,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACmB,OAAO,CAAEC,UAAU,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACqB,SAAS,CAAEC,YAAY,CAAC,CAAGtB,QAAQ,CAAU,KAAK,CAAC,CAC1D,KAAM,CAAAuB,QAAQ,CAAGrB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAsB,WAAW,CAAGA,CAAA,GAAM,CACtBF,YAAY,CAAC,IAAI,CAAC,CAClB,GAAI,CACAvB,KAAK,CACA0B,IAAI,IAAAC,MAAA,CAAIvB,OAAO,wBAAuB,CACnCwB,iBAAiB,CAAEZ,eAAe,CAClCE,QAAQ,CAAEA,QACd,CAAC,CAAC,CACDW,IAAI,CAACC,KAAA,EAAc,IAAb,CAAEC,IAAK,CAAC,CAAAD,KAAA,CACX,GAAIC,IAAI,CAACC,OAAO,GAAK,KAAK,CAAE,CACxBX,UAAU,CAACU,IAAI,CAACX,OAAO,CAAC,CACxB,OACJ,CACAL,IAAI,CAACkB,gBAAgB,CAACF,IAAI,CAACG,KAAK,CAAC,CACjCnB,IAAI,CAACoB,aAAa,CAACJ,IAAI,CAACK,EAAE,CAAC,CAC3BZ,QAAQ,CAAC,aAAa,CAAC,CAC3B,CAAC,CAAC,CACDa,KAAK,CAAEC,CAAa,EAAK,KAAAC,WAAA,CACtBhB,YAAY,CAAC,KAAK,CAAC,CACnBF,UAAU,CACN,EAAAkB,WAAA,CACID,CAAC,CAACE,QAAQ,UAAAD,WAAA,iBAAVA,WAAA,CAAYR,IAAI,EAIlBX,OACN,CAAC,CACL,CAAC,CAAC,CACV,CAAE,MAAOqB,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,iBAAiB,CAAEA,KAAK,CAAC,CAC3C,CACJ,CAAC,CACD,mBACI/B,KAAA,CAAAE,SAAA,EAAA+B,QAAA,eACInC,IAAA,CAACF,MAAM,GAAC,CAAC,cACTE,IAAA,QAAKoC,SAAS,CAAC,yCAAyC,CAAAD,QAAA,cACpDjC,KAAA,QAAKkC,SAAS,CAAC,yDAAyD,CAAAD,QAAA,eACpEnC,IAAA,OAAIoC,SAAS,CAAC,uDAAuD,CAAAD,QAAA,CAAC,QAEtE,CAAI,CAAC,cACLnC,IAAA,QAAKoC,SAAS,CAAC,MAAM,CAAAD,QAAA,cACjBnC,IAAA,UACIoC,SAAS,CAAC,4LAA4L,CACtMC,IAAI,CAAC,MAAM,CACXC,WAAW,CAAC,mBAAmB,CAC/BC,KAAK,CAAE/B,eAAgB,CACvBgC,QAAQ,CAAGV,CAAC,EAAKrB,kBAAkB,CAACqB,CAAC,CAACW,MAAM,CAACF,KAAK,CAAE,CACpDG,QAAQ,CAAE,IAAK,CAClB,CAAC,CACD,CAAC,cACN1C,IAAA,QAAKoC,SAAS,CAAC,MAAM,CAAAD,QAAA,cACjBnC,IAAA,UACIoC,SAAS,CAAC,4LAA4L,CACtMC,IAAI,CAAC,UAAU,CACfC,WAAW,CAAC,UAAU,CACtBC,KAAK,CAAE7B,QAAS,CAChB8B,QAAQ,CAAGV,CAAC,EAAKnB,WAAW,CAACmB,CAAC,CAACW,MAAM,CAACF,KAAK,CAAE,CAC7CG,QAAQ,CAAE,IAAK,CAClB,CAAC,CACD,CAAC,cACN1C,IAAA,QAAKoC,SAAS,CAAC,mCAAmC,CAAAD,QAAA,cAC9CnC,IAAA,WACIoC,SAAS,CAAC,qIAAqI,CAC/IC,IAAI,CAAC,QAAQ,CACbM,OAAO,CAAE1B,WAAY,CAAAkB,QAAA,CAEpBrB,SAAS,cACNd,IAAA,QAAKoC,SAAS,CAAC,uBAAuB,CAAAD,QAAA,cAClCnC,IAAA,QAAKoC,SAAS,CAAC,oCAAoC,CAAAD,QAAA,cAC/CnC,IAAA,CAACH,OAAO,GAAE,CAAC,CACV,CAAC,CACL,CAAC,CAEN,OACH,CACG,CAAC,CACR,CAAC,cACNK,KAAA,QAAKkC,SAAS,CAAC,6CAA6C,CAAAD,QAAA,eACxDjC,KAAA,SAAMkC,SAAS,CAAC,aAAa,CAAAD,QAAA,EAAC,wBACJ,CAAC,GAAG,EACxB,CAAC,cACPnC,IAAA,CAACN,IAAI,EACDkD,EAAE,CAAC,SAAS,CACZR,SAAS,CAAC,oCAAoC,CAAAD,QAAA,CACjD,QAED,CAAM,CAAC,EACN,CAAC,cACNnC,IAAA,QAAKoC,SAAS,CAAC,2DAA2D,CAAAD,QAAA,CACrEvB,OAAO,CACP,CAAC,EACL,CAAC,CACL,CAAC,EACR,CAAC,CAEX,CAAC,CAED,cAAe,CAAAP,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}